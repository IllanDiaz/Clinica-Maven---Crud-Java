<?xml version="1.0" encoding="UTF-8"?>

<ui:composition template="/WEB-INF/template/layout_medico.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <ui:param name="title" value="Productos"/>
    <ui:define name="content">
        <section class="container">
            <h1 class="section-title">Historial</h1>
            <div class="container-form">
                <h:form enctype="multipart/form-data" class="row g-3" id="formulario">
                    <div class="col-12 col-md-6">
                        <label for="inputSintomas" class="form-label">Sintomas</label>
                        <p:inputText id="inputSintomas" class="form-control" value="#{historialBean.service.historial.sintomas}" required="true"></p:inputText>
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="inputDiagnostico" class="form-label">Diagnostico</label>
                        <p:inputText id="inputDiagnostico" class="form-control" value="#{historialBean.service.historial.diagnostico}" required="true"></p:inputText>
                    </div>
                    <div class="col-12 col-md-6">
                        <label for="inputTratamiento" class="form-label">Tratamiento</label>
                        <p:inputText id="inputTratamiento" class="form-control" value="#{historialBean.service.historial.tratamiento}" required="true"></p:inputText>
                    </div>
                    <div class="col-12 col-md-4">
                        <label for="inputPaciente" class="form-label">ID Paciente</label>
                        <div>
                            <p:inputNumber id="inputPaciente" value="#{historialBean.service.historial.paciente_id_paciente}" required="true"></p:inputNumber>  
                        </div>
                    </div>
                     <label for="inputMedico" class="form-label">ID Medico</label>
                        <div>
                            <p:inputNumber id="inputMedico" value="#{historialBean.service.historial.medico_id_medico}" required="true"></p:inputNumber>  
                        </div>

                    <div class="col-12">
                        <p:commandButton actionListener="#{historialBean.service.historialIns()}" value="Crear" update=":formulario"></p:commandButton>
                        <p:commandButton actionListener="#{historialBean.service.reiniciarFormulario()}" type="reset" value="Limpiar" />
                    </div>
                </h:form>
            </div>

            <div class="container-table mt-3">
                <h:form>
                    <table class="table table-dark table-striped" id="tablaHistorial">
                        <thead>
                            <tr>
                                <th>Id</th>
                                <th>Sintomas</th>
                                <th>Diagnostico</th>
                                <th>Tratamiento</th>
                                <th>ID Paciente</th>
                                <th>ID Medico</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody> 
                            <ui:repeat value="#{historialBean.service.historialSel()}" var="i">
                                <tr>
                                    <td>#{i.id_historial}</td>
                                    <td>#{i.sintomas}</td>
                                    <td>#{i.diagnostico}</td>
                                    <td>#{i.tratamiento}</td>
                                    <td>#{i.paciente_id_paciente}</td>
                                    <td>#{i.medico_id_medico}</td>
                                    <td>
                                        <p:commandButton value="Editar" actionListener="#{historialBean.service.editarHistorial(i.id_historial)}"/>
                                    </td>
                                    <td>
                                        <p:commandButton value="Eliminar" actionListener="#{historialBean.service.historialDel(i.id_historial)}"></p:commandButton>
                                    </td>
                                </tr>
                            </ui:repeat>
                        </tbody>
                    </table>
                </h:form>
            </div>

        </section>
    </ui:define>
</ui:composition>